<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.my.house.dao.HouseDao">

	

	<!-- reg_dt : LocalDateTime, check out BoardDto setter  -->
	<select id="houseList" parameterType="map" resultType="com.my.house.dto.HouseDto">
		select *
		from house_info
		LIMIT 100
	</select>
	
	
	
	<select id="houseListSearchWord" parameterType="map" resultType="com.my.house.dto.HouseDto">
		select *
		from house_info
		where house_name LIKE CONCAT('%', #{searchWord} ,'%')
		union
		select *
		from house_info
		where dong LIKE CONCAT('%', #{searchWord} ,'%')
		union
		select h.*
		from house_info h, gugun_code g
		where g.name LIKE CONCAT('%', #{searchWord} ,'%')
		and g.code = h.code
	</select>
	
	<select id="dealList" parameterType="map"  resultType="com.my.house.dto.DealDto">
		SELECT house_no , dealAmount , dealDay , dealMonth , dealYear , area , floor 
		FROM finalhouse.house_deal 
		where house_no = #{houseNo};
	</select>
	

	<select id="houseDetail" parameterType="map"  resultType="com.my.house.dto.HouseDto">
		select *
		from house_info
		where house_no = #{houseNo}
	</select>


	<select id="agentName" parameterType="int" resultType="String">
		SELECT u.USER_NAME
		FROM agent a , user u 
		where a.user_no = u.USER_NO 
		and a.agent_no = #{agentNo};
	</select>
	
	
	
	<select id="agentNo" parameterType="map" resultType="int">
		SELECT agent_no 
		FROM agent_house 
		where house_no = #{houseNo};
	</select>
	
	
	
</mapper>